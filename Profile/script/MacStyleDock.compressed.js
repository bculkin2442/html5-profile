/* MacStyleDock.js - a function for creating a Mac-OSX-style dock
 *
 * The author of this program, Safalra (Stephen Morley), irrevocably releases
 * all rights to this program, with the intention of it becoming part of the
 * public domain. Because this program is released into the public domain, it
 * comes with no warranty either expressed or implied, to the extent permitted
 * by law.
 *
 * For more public domain JavaScript code by the same author, visit:
 *
 * http://www.safalra.com/web-design/javascript/
 */

function MacStyleDock(_1,_2,_3,_4,_5){var _6=document.createElement("div");_1.appendChild(_6);var _7=document.createElement("div");_1.appendChild(_7);_6.style.textAlign="center";_7.style.textAlign="center";_6.style.height=_4+"px";_7.style.height=_4+"px";var _8=0;var _9=0;var _a=null;var _b=null;var _c=null;var _d=[];var _e=[];var _f=[];var _10=[];for(var i=0;i<_2.length;i++){_e[i]=document.createElement("img");_e[i].style.position="relative";_10[i]=_3;_f[i]=document.createElement("img");updateIconProperties(i);_6.appendChild(_e[i]);_7.appendChild(_f[i]);if(_e[i].addEventListener){_e[i].addEventListener("mousemove",processMouseMove,false);_e[i].addEventListener("mouseout",processMouseOut,false);_e[i].addEventListener("click",_2[i].onclick,false);}else{if(_e[i].attachEvent){_e[i].attachEvent("onmousemove",processMouseMove);_e[i].attachEvent("onmouseout",processMouseOut);_e[i].attachEvent("onclick",_2[i].onclick);}}for(var j=0;j<_2[i].sizes.length;j++){var _13=document.createElement("img");_13.setAttribute("src",_2[i].name+_2[i].sizes[j]+_2[i].extension);_d.push(_13);}}function updateIconProperties(_14){var _15=_3+_9*(_10[_14]-_3);var _16=0;while(_2[_14].sizes[_16]<_15&&_16+1<_2[_14].sizes.length){_16++;}if(_15==_4){_e[_14].setAttribute("src",_2[_14].name+_4+"-full"+_2[_14].extension);}else{_e[_14].setAttribute("src",_2[_14].name+_2[_14].sizes[_16]+_2[_14].extension);}_f[_14].setAttribute("src",_2[_14].name+_2[_14].sizes[_16]+"-reflection"+_2[_14].extension);_e[_14].setAttribute("width",_15);_e[_14].setAttribute("height",_15);_f[_14].setAttribute("width",_15);_f[_14].setAttribute("height",_15);_e[_14].style.marginTop=(_4-_15)+"px";_f[_14].style.marginBottom=(_4-_15)+"px";}function processMouseMove(e){window.clearTimeout(_a);_a=null;window.clearInterval(_b);_b=null;if(_9!=1&&!_c){_c=window.setInterval(function(){if(_9<1){_9+=0.125;}if(_9>=1){_9=1;window.clearInterval(_c);_c=null;}for(var i=0;i<_e.length;i++){updateIconProperties(i);}},20);}if(!e){e=window.event;}var _19=e.target||e.srcElement;var _1a=0;while(_e[_1a]!=_19){_1a++;}var _1b=(e.layerX||e.offsetX)/_10[_1a];if(_1b){var _1c=0;for(var i=0;i<_e.length;i++){if(i<_1a-_5||i>_1a+_5){_10[i]=_3;}else{if(i==_1a){_10[i]=_4;}else{if(i<_1a){_10[i]=_3+Math.round((_4-_3-1)*(Math.cos((i-_1a-_1b+1)/_5*Math.PI)+1)/2);_1c+=_10[i];}else{_10[i]=_3+Math.round((_4-_3-1)*(Math.cos((i-_1a-_1b)/_5*Math.PI)+1)/2);_1c+=_10[i];}}}}if(_1c>_8){_8=_1c;}if(_1a>=_5&&_1a<_10.length-_5&&_1c<_8){_10[_1a-_5]+=Math.floor((_8-_1c)/2);_10[_1a+_5]+=Math.ceil((_8-_1c)/2);}for(var i=0;i<_e.length;i++){updateIconProperties(i);}}}function processMouseOut(){if(!_a&&!_b){_a=window.setTimeout(function(){_a=null;if(_c){window.clearInterval(_c);_c=null;}_b=window.setInterval(function(){if(_9>0){_9-=0.125;}if(_9<=0){_9=0;window.clearInterval(_b);_b=null;}for(var i=0;i<_e.length;i++){updateIconProperties(i);}},20);},100);}}}
